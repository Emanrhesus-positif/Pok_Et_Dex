{
  "version": 3,
  "sources": ["../../react-dom/client.js", "../../vike-react/dist/integration/onRenderClient.js", "../../vike-react/dist/utils/isCallable.js", "../../vike-react/dist/hooks/useConfig/configsCumulative.js", "../../vike-react/dist/utils/includes.js", "../../vike-react/dist/integration/getHeadSetting.js", "../../vike-react/dist/integration/getPageElement.js", "../../vike-react/dist/utils/callCumulativeHooks.js"],
  "sourcesContent": ["'use strict';\r\n\r\nvar m = require('react-dom');\r\nif (process.env.NODE_ENV === 'production') {\r\n  exports.createRoot = m.createRoot;\r\n  exports.hydrateRoot = m.hydrateRoot;\r\n} else {\r\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\r\n  exports.createRoot = function(c, o) {\r\n    i.usingClientEntryPoint = true;\r\n    try {\r\n      return m.createRoot(c, o);\r\n    } finally {\r\n      i.usingClientEntryPoint = false;\r\n    }\r\n  };\r\n  exports.hydrateRoot = function(c, h, o) {\r\n    i.usingClientEntryPoint = true;\r\n    try {\r\n      return m.hydrateRoot(c, h, o);\r\n    } finally {\r\n      i.usingClientEntryPoint = false;\r\n    }\r\n  };\r\n}\r\n", "// https://vike.dev/onRenderClient\r\nexport { onRenderClient };\r\nimport ReactDOM from 'react-dom/client';\r\nimport { getHeadSetting } from './getHeadSetting.js';\r\nimport { getPageElement } from './getPageElement.js';\r\nimport './styles.css';\r\nimport { callCumulativeHooks } from '../utils/callCumulativeHooks.js';\r\nimport { applyHeadSettings } from './applyHeadSettings.js';\r\nlet root;\r\nconst onRenderClient = async (pageContext) => {\r\n    pageContext._headAlreadySet = pageContext.isHydration;\r\n    // Use case:\r\n    // - Store hydration https://github.com/vikejs/vike-react/issues/110\r\n    await callCumulativeHooks(pageContext.config.onBeforeRenderClient, pageContext);\r\n    const { page, renderPromise } = getPageElement(pageContext);\r\n    pageContext.page = page;\r\n    // TODO: implement this? So that, upon errors, onRenderClient() throws an error and Vike can render the error. As of April 2024 it isn't released yet.\r\n    //  - https://react-dev-git-fork-rickhanlonii-rh-root-options-fbopensource.vercel.app/reference/react-dom/client/createRoot#show-a-dialog-for-uncaught-errors\r\n    //  - https://react-dev-git-fork-rickhanlonii-rh-root-options-fbopensource.vercel.app/reference/react-dom/client/hydrateRoot#show-a-dialog-for-uncaught-errors\r\n    const onUncaughtError = (_error, _errorInfo) => { };\r\n    const container = document.getElementById('root');\r\n    if (pageContext.isHydration &&\r\n        // Whether the page was [Server-Side Rendered](https://vike.dev/ssr).\r\n        container.innerHTML !== '') {\r\n        // First render while using SSR, i.e. [hydration](https://vike.dev/hydration)\r\n        root = ReactDOM.hydrateRoot(container, page, {\r\n            // @ts-expect-error\r\n            onUncaughtError,\r\n        });\r\n    }\r\n    else {\r\n        if (!root) {\r\n            // First render without SSR\r\n            root = ReactDOM.createRoot(container, {\r\n                // @ts-expect-error\r\n                onUncaughtError,\r\n            });\r\n        }\r\n        root.render(page);\r\n    }\r\n    pageContext.root = root;\r\n    await renderPromise;\r\n    if (!pageContext.isHydration) {\r\n        pageContext._headAlreadySet = true;\r\n        applyHead(pageContext);\r\n    }\r\n    // Use cases:\r\n    // - Custom user settings: https://vike.dev/head-tags#custom-settings\r\n    // - Testing tools: https://github.com/vikejs/vike-react/issues/95\r\n    await callCumulativeHooks(pageContext.config.onAfterRenderClient, pageContext);\r\n};\r\nfunction applyHead(pageContext) {\r\n    const title = getHeadSetting('title', pageContext);\r\n    const lang = getHeadSetting('lang', pageContext);\r\n    applyHeadSettings(title, lang);\r\n}\r\n", "export function isCallable(thing) {\r\n    return thing instanceof Function || typeof thing === 'function';\r\n}\r\n", "export const configsCumulative = ['Head', 'bodyAttributes', 'htmlAttributes'];\r\n", "// https://stackoverflow.com/questions/56565528/typescript-const-assertions-how-to-use-array-prototype-includes/74213179#74213179\r\n/** Same as Array.prototype.includes() but with type inference */\r\nexport function includes(values, x) {\r\n    return values.includes(x);\r\n}\r\n/*\r\nexport function includes<Arr extends any[] | readonly any[]>(arr: Arr, el: unknown): el is Arr[number] {\r\n  return arr.includes(el as any)\r\n}\r\n*/\r\n", "export { getHeadSetting };\r\nimport { isCallable } from '../utils/isCallable.js';\r\nimport { configsCumulative } from '../hooks/useConfig/configsCumulative.js';\r\nimport { includes } from '../utils/includes.js';\r\n// We use `any` instead of doing proper validation in order to save KBs sent to the client-side.\r\nfunction getHeadSetting(configName, pageContext) {\r\n    // Set by useConfig()\r\n    const valFromUseConfig = pageContext._configFromHook?.[configName];\r\n    // Set by +configName.js\r\n    const valFromConfig = pageContext.config[configName];\r\n    const getCallable = (val) => (isCallable(val) ? val(pageContext) : val);\r\n    if (!includes(configsCumulative, configName)) {\r\n        if (valFromUseConfig !== undefined)\r\n            return valFromUseConfig;\r\n        return getCallable(valFromConfig);\r\n    }\r\n    else {\r\n        return [\r\n            //\r\n            ...(valFromConfig ?? []).map(getCallable),\r\n            ...(valFromUseConfig ?? []),\r\n        ];\r\n    }\r\n}\r\n", "export { getPageElement };\r\nimport React, { Suspense, useEffect } from 'react';\r\nimport { PageContextProvider } from '../hooks/usePageContext.js';\r\nfunction getPageElement(pageContext) {\r\n    const { Page, config: { Loading }, } = pageContext;\r\n    let page = Page ? React.createElement(Page, null) : null;\r\n    // Wrapping\r\n    const addSuspense = (el) => {\r\n        if (!Loading?.layout)\r\n            return el;\r\n        return React.createElement(Suspense, { fallback: React.createElement(Loading.layout, null) }, page);\r\n    };\r\n    page = addSuspense(page);\r\n    [\r\n        // Inner wrapping\r\n        ...(pageContext.config.Layout || []),\r\n        // Outer wrapping\r\n        ...(pageContext.config.Wrapper || []),\r\n    ].forEach((Wrap) => {\r\n        page = React.createElement(Wrap, null, page);\r\n        page = addSuspense(page);\r\n    });\r\n    page = React.createElement(PageContextProvider, { pageContext: pageContext }, page);\r\n    let renderPromiseResolve;\r\n    let renderPromise = new Promise((r) => (renderPromiseResolve = r));\r\n    page = React.createElement(RenderPromiseProvider, { renderPromiseResolve: renderPromiseResolve }, page);\r\n    if (pageContext.config.reactStrictMode !== false) {\r\n        page = React.createElement(React.StrictMode, null, page);\r\n    }\r\n    return { page, renderPromise };\r\n}\r\nfunction RenderPromiseProvider({ children, renderPromiseResolve, }) {\r\n    useEffect(renderPromiseResolve);\r\n    return children;\r\n}\r\n", "export { callCumulativeHooks };\r\nimport { providePageContext } from 'vike/getPageContext';\r\nasync function callCumulativeHooks(values, pageContext) {\r\n    if (!values)\r\n        return [];\r\n    const valuesPromises = values.map((val) => {\r\n        if (typeof val === 'function') {\r\n            providePageContext(pageContext);\r\n            // Hook\r\n            return val(pageContext);\r\n        }\r\n        else {\r\n            // Plain value\r\n            return val;\r\n        }\r\n    });\r\n    const valuesResolved = await Promise.all(valuesPromises);\r\n    return valuesResolved;\r\n}\r\n"],
  "mappings": "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",
  "names": ["React", "ReactDOM"]
}
